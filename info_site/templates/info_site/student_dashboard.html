{% extends "info_site/base.html" %}
{% load static %}

{% block content %}
<section class="container" style="padding: 60px 0;">
    <div style="max-width: 1000px; margin: 0 auto;">
        
        <!-- Welcome Section -->
        <div style="background: linear-gradient(135deg, var(--primary), var(--secondary)); color: white; padding: 30px; border-radius: 10px; margin-bottom: 30px;">
            <h2 style="margin-bottom: 10px;">Welcome back, {{ user.first_name }}!</h2>
            <p style="opacity: 0.9; margin: 0;">Here's your learning dashboard</p>
        </div>
        
        <!-- Quick Actions -->
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 40px;">
            <a href="{% url 'student_profile' %}" style="background: white; padding: 20px; border-radius: 10px; text-align: center; text-decoration: none; color: var(--text); box-shadow: 0 2px 10px rgba(0,0,0,0.1); transition: transform 0.3s;">
                <div style="font-size: 2rem; color: var(--primary); margin-bottom: 10px;">
                    <i class="fas fa-user-circle"></i>
                </div>
                <div style="font-weight: 600;">My Profile</div>
            </a>
            
            <a href="https://docs.google.com/forms/d/e/1FAIpQLSe2Qt-OMgUfD6CDNiwRO4lyoBH-s2yzypGVsirvpa96cH-BzQ/viewform?usp=header" style="background: white; padding: 20px; border-radius: 10px; text-align: center; text-decoration: none; color: var(--text); box-shadow: 0 2px 10px rgba(0,0,0,0.1); transition: transform 0.3s;">
                <div style="font-size: 2rem; color: var(--primary); margin-bottom: 10px;">
                    <i class="fas fa-plus-circle"></i>
                </div>
                <div style="font-weight: 600;">Enroll in Course</div>
            </a>
            
            <a href="{% url 'contact' %}" style="background: white; padding: 20px; border-radius: 10px; text-align: center; text-decoration: none; color: var(--text); box-shadow: 0 2px 10px rgba(0,0,0,0.1); transition: transform 0.3s;">
                <div style="font-size: 2rem; color: var(--primary); margin-bottom: 10px;">
                    <i class="fas fa-question-circle"></i>
                </div>
                <div style="font-weight: 600;">Get Help</div>
            </a>
        </div>
        
        <!-- Messages -->
        {% comment %} {% if messages %}
        <div style="margin-bottom: 30px;">
            {% for message in messages %}
            <div style="padding: 15px; background-color: {% if message.tags == 'success' %}#d4edda{% elif message.tags == 'error' %}#f8d7da{% else %}#fff3cd{% endif %}; border: 1px solid {% if message.tags == 'success' %}#c3e6cb{% elif message.tags == 'error' %}#f5c6cb{% else %}#ffeaa7{% endif %}; border-radius: 5px; color: {% if message.tags == 'success' %}#155724{% elif message.tags == 'error' %}#721c24{% else %}#856404{% endif %};">
                {{ message }}
            </div>
            {% endfor %}
        </div>
        {% endif %}
         {% endcomment %}
        <!-- Enrollments Section -->
        {% comment %} <div style="background: white; padding: 30px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
            <h3 style="color: var(--dark); margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                <i class="fas fa-graduation-cap" style="color: var(--primary);"></i>
                My Enrollments
            </h3>
            
            {% if enrollments %}
                {% for enrollment in enrollments %}
                <div style="border: 2px solid var(--gray); border-radius: 10px; padding: 20px; margin-bottom: 20px; {% if enrollment.status == 'enrolled' %}border-color: var(--success);{% elif enrollment.status == 'pending' %}border-color: var(--warning);{% endif %}">
                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 15px;">
                        <div>
                            <h4 style="color: var(--dark); margin-bottom: 5px;">{{ enrollment.cohort.course.title }}</h4>
                            <p style="color: var(--text-light); margin: 0;">{{ enrollment.cohort.name }}</p>
                        </div>
                        <span style="padding: 5px 15px; border-radius: 20px; font-size: 0.9rem; font-weight: 600;
                            {% if enrollment.status == 'enrolled' %}
                                background-color: #d4edda; color: #155724;
                            {% elif enrollment.status == 'pending' %}
                                background-color: #fff3cd; color: #856404;
                            {% elif enrollment.status == 'completed' %}
                                background-color: #d1ecf1; color: #0c5460;
                            {% else %}
                                background-color: var(--gray); color: var(--text);
                            {% endif %}
                        ">
                            {{ enrollment.get_status_display }}
                        </span>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-bottom: 15px;">
                        <div>
                            <div style="color: var(--text-light); font-size: 0.9rem;">Start Date</div>
                            <div style="font-weight: 600;">{{ enrollment.cohort.start_date|date:"M d, Y" }}</div>
                        </div>
                        <div>
                            <div style="color: var(--text-light); font-size: 0.9rem;">End Date</div>
                            <div style="font-weight: 600;">{{ enrollment.cohort.end_date|date:"M d, Y" }}</div>
                        </div>
                        <div>
                            <div style="color: var(--text-light); font-size: 0.9rem;">Payment Status</div>
                            <div style="font-weight: 600; color: {% if enrollment.is_paid %}var(--success){% else %}var(--warning){% endif %};">
                                {% if enrollment.is_paid %}
                                    <i class="fas fa-check-circle"></i> Paid
                                {% else %}
                                    <i class="fas fa-exclamation-circle"></i> Pending
                                {% endif %}
                            </div>
                        </div>
                        <div>
                            <div style="color: var(--text-light); font-size: 0.9rem;">Attendance</div>
                            <div style="font-weight: 600;">{{ enrollment.attendance_count }} sessions</div>
                        </div>
                    </div>
                    
                    {% if enrollment.assessment_call_date %}
                    <div style="background-color: var(--light); padding: 10px 15px; border-radius: 5px; margin-bottom: 15px;">
                        <i class="fas fa-phone" style="color: var(--primary);"></i>
                        <strong>Assessment Call:</strong> {{ enrollment.assessment_call_date|date:"M d, Y" }} at {{ enrollment.assessment_call_date|time:"h:i A" }}
                    </div>
                    {% endif %}
                    
                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                        {% if enrollment.status == 'enrolled' %}
                            <a href="{% url 'cohort_materials' enrollment.cohort.id %}" class="btn btn-primary" style="text-decoration: none;">
                                <i class="fas fa-book"></i> Access Materials
                            </a>
                        {% endif %}
                        
                        {% if enrollment.status == 'pending' and not enrollment.is_paid %}
                            <a href="{% url 'enrollment_payment' enrollment.id %}" class="btn btn-accent" style="text-decoration: none;">
                                <i class="fas fa-credit-card"></i> Complete Payment
                            </a>
                        {% endif %}
                        
                        {% if enrollment.cohort.zoom_link and enrollment.status == 'enrolled' %}
                            <a href="{{ enrollment.cohort.zoom_link }}" target="_blank" class="btn btn-outline" style="text-decoration: none;">
                                <i class="fas fa-video"></i> Join Zoom Class
                            </a>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <div style="text-align: center; padding: 40px 20px; color: var(--text-light);">
                    <div style="font-size: 3rem; margin-bottom: 20px; opacity: 0.5;">
                        <i class="fas fa-inbox"></i>
                    </div>
                    <p style="font-size: 1.1rem; margin-bottom: 20px;">You haven't enrolled in any courses yet.</p>
                    <a href="{% url 'enrollment' %}" class="btn btn-primary" style="text-decoration: none;">
                        Enroll in a Course
                    </a>
                </div>
            {% endif %}
        </div> {% endcomment %}
        
        <!-- Help Section -->
        <div style="background: var(--light); padding: 20px; border-radius: 10px; margin-top: 30px; text-align: center;">
            <p style="color: var(--text); margin-bottom: 10px;">
                <strong>Need help or have questions?</strong>
            </p>
            <p style="color: var(--text-light); margin-bottom: 15px;">
                Contact us at <a href="mailto:info@risehub.site" style="color: var(--primary);">info@risehub.site</a> or Mon-Fri: 10AM - 7PM
            </p>
            <a href="{% url 'contact' %}" class="btn btn-outline" style="text-decoration: none;">
                Send Us a Message
            </a>
        </div>
    </div>
</section>

<style>
    a:hover {
        transform: translateY(-2px);
    }
</style>
{% endblock content %}