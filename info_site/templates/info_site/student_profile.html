{% extends "info_site/base.html" %}
{% load static %}

{% block content %}
<section class="container" style="padding: 60px 0;">
    <div style="max-width: 800px; margin: 0 auto;">
        
        <!-- Header -->
        <div style="background: white; padding: 30px; border-radius: 10px; margin-bottom: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <h2 style="color: var(--dark); margin-bottom: 5px;">My Profile</h2>
                    <p style="color: var(--text-light); margin: 0;">Manage your personal information</p>
                </div>
                <a href="{% url 'student_dashboard' %}" class="btn btn-outline" style="text-decoration: none;">
                    <i class="fas fa-arrow-left"></i> Back to Dashboard
                </a>
            </div>
        </div>
        
        <!-- Messages -->
        {% if messages %}
        <div style="margin-bottom: 30px;">
            {% for message in messages %}
            <div style="padding: 15px; background-color: {% if message.tags == 'success' %}#d4edda{% elif message.tags == 'error' %}#f8d7da{% else %}#fff3cd{% endif %}; border: 1px solid {% if message.tags == 'success' %}#c3e6cb{% elif message.tags == 'error' %}#f5c6cb{% else %}#ffeaa7{% endif %}; border-radius: 5px; color: {% if message.tags == 'success' %}#155724{% elif message.tags == 'error' %}#721c24{% else %}#856404{% endif %};">
                {{ message }}
            </div>
            {% endfor %}
        </div>
        {% endif %}
        
        <!-- Profile Form -->
        <div style="background: white; padding: 40px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
            <form method="post">
                {% csrf_token %}
                
                <h3 style="color: var(--primary); margin-bottom: 20px; padding-bottom: 10px; border-bottom: 2px solid var(--light);">
                    <i class="fas fa-user"></i> Contact Information
                </h3>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px;">
                    <div>
                        <label style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--text);">
                            {{ form.phone_number.label }}
                        </label>
                        {{ form.phone_number }}
                        {% if form.phone_number.errors %}
                        <div style="color: var(--danger); font-size: 0.9rem; margin-top: 5px;">
                            {{ form.phone_number.errors }}
                        </div>
                        {% endif %}
                    </div>
                    
                    <div>
                        <label style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--text);">
                            {{ form.date_of_birth.label }}
                        </label>
                        {{ form.date_of_birth }}
                        {% if form.date_of_birth.errors %}
                        <div style="color: var(--danger); font-size: 0.9rem; margin-top: 5px;">
                            {{ form.date_of_birth.errors }}
                        </div>
                        {% endif %}
                    </div>
                </div>
                
                <div style="margin-bottom: 30px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--text);">
                        {{ form.address.label }}
                    </label>
                    {{ form.address }}
                    {% if form.address.errors %}
                    <div style="color: var(--danger); font-size: 0.9rem; margin-top: 5px;">
                        {{ form.address.errors }}
                    </div>
                    {% endif %}
                </div>
                
                <h3 style="color: var(--primary); margin-bottom: 20px; padding-bottom: 10px; border-bottom: 2px solid var(--light);">
                    <i class="fas fa-phone-alt"></i> Emergency Contact
                </h3>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px;">
                    <div>
                        <label style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--text);">
                            {{ form.emergency_contact_name.label }}
                        </label>
                        {{ form.emergency_contact_name }}
                        {% if form.emergency_contact_name.errors %}
                        <div style="color: var(--danger); font-size: 0.9rem; margin-top: 5px;">
                            {{ form.emergency_contact_name.errors }}
                        </div>
                        {% endif %}
                    </div>
                    
                    <div>
                        <label style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--text);">
                            {{ form.emergency_contact_phone.label }}
                        </label>
                        {{ form.emergency_contact_phone }}
                        {% if form.emergency_contact_phone.errors %}
                        <div style="color: var(--danger); font-size: 0.9rem; margin-top: 5px;">
                            {{ form.emergency_contact_phone.errors }}
                        </div>
                        {% endif %}
                    </div>
                </div>
                
                <h3 style="color: var(--primary); margin-bottom: 20px; padding-bottom: 10px; border-bottom: 2px solid var(--light);">
                    <i class="fas fa-laptop"></i> Technology Assessment
                </h3>
                
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--text);">
                        {{ form.tech_skill_level.label }}
                    </label>
                    {{ form.tech_skill_level }}
                    {% if form.tech_skill_level.errors %}
                    <div style="color: var(--danger); font-size: 0.9rem; margin-top: 5px;">
                        {{ form.tech_skill_level.errors }}
                    </div>
                    {% endif %}
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                    <div style="padding: 15px; background-color: var(--light); border-radius: 5px;">
                        <input type="checkbox" id="id_owns_smartphone" name="owns_smartphone" {% if form.owns_smartphone.value %}checked{% endif %} style="margin-right: 8px;" />
                        <label for="id_owns_smartphone" style="font-weight: 600; color: var(--text);">
                            {{ form.owns_smartphone.label }}
                        </label>
                    </div>
                    
                    <div style="padding: 15px; background-color: var(--light); border-radius: 5px;">
                        <input type="checkbox" id="id_owns_computer" name="owns_computer" {% if form.owns_computer.value %}checked{% endif %} style="margin-right: 8px;" />
                        <label for="id_owns_computer" style="font-weight: 600; color: var(--text);">
                            {{ form.owns_computer.label }}
                        </label>
                    </div>
                </div>
                
                <div style="margin-bottom: 30px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--text);">
                        {{ form.device_type.label }}
                    </label>
                    {{ form.device_type }}
                    <small style="color: var(--text-light); font-size: 0.85rem;">
                        e.g., iPhone 12, Samsung Galaxy Tab, HP Laptop
                    </small>
                    {% if form.device_type.errors %}
                    <div style="color: var(--danger); font-size: 0.9rem; margin-top: 5px;">
                        {{ form.device_type.errors }}
                    </div>
                    {% endif %}
                </div>
                
                <h3 style="color: var(--primary); margin-bottom: 20px; padding-bottom: 10px; border-bottom: 2px solid var(--light);">
                    <i class="fas fa-envelope"></i> Communication Preferences
                </h3>
                
                <div style="margin-bottom: 30px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--text);">
                        {{ form.preferred_contact.label }}
                    </label>
                    {{ form.preferred_contact }}
                    <small style="color: var(--text-light); font-size: 0.85rem;">
                        How would you like us to contact you?
                    </small>
                    {% if form.preferred_contact.errors %}
                    <div style="color: var(--danger); font-size: 0.9rem; margin-top: 5px;">
                        {{ form.preferred_contact.errors }}
                    </div>
                    {% endif %}
                </div>
                
                <div style="display: flex; gap: 15px; justify-content: flex-end; padding-top: 20px; border-top: 1px solid var(--gray);">
                    <a href="{% url 'student_dashboard' %}" class="btn btn-outline" style="text-decoration: none;">
                        Cancel
                    </a>
                    <button type="submit" class="btn btn-primary" style="padding: 12px 30px;">
                        <i class="fas fa-save"></i> Save Profile
                    </button>
                </div>
            </form>
        </div>
    </div>
</section>
{% endblock content %}